{
  "version": "1",
  "graphs": {
    "clean": {
      "command": "rm -rf cmd/*/main cmd/*/*.exe pkg/*/*.a .cache/cmd .cache/pkg"
    },
    "init": {
      "command": "go mod tidy",
      "deps": [
        "clean"
      ]
    },
    "fetch-cache": {
      "command": "chmod +x scripts/fetch-cache.sh && ./scripts/fetch-cache.sh",
      "deps": [
        "init"
      ]
    },
    "build-gateway": {
      "command": "echo 'ðŸ”¨ Building gateway service...' && go build -o cmd/gateway/main ./cmd/gateway",
      "deps": [
        "fetch-cache"
      ]
    },
    "build-auth": {
      "command": "echo 'ðŸ”¨ Building auth service...' && go build -o cmd/auth/main ./cmd/auth",
      "deps": [
        "fetch-cache"
      ]
    },
    "build-users": {
      "command": "echo 'ðŸ”¨ Building users service...' && go build -o cmd/users/main ./cmd/users",
      "deps": [
        "fetch-cache"
      ]
    },
    "upload-cache": {
      "command": "chmod +x scripts/upload-cache.sh && ./scripts/upload-cache.sh",
      "deps": [
        "build-gateway",
        "build-auth",
        "build-users"
      ]
    },
    "distributed-build": {
      "command": "echo 'âœ… Distributed build complete!' && echo 'ðŸš€ All microservices built with caching optimization'",
      "deps": [
        "upload-cache"
      ]
    },
    "clean-build": {
      "command": "echo 'ðŸ§¹ Clean build (no cache)'",
      "deps": [
        "distributed-build"
      ]
    }
  }
}

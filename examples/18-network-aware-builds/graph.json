{
  "version": "1",
  "graphs": {
    "clean": {
      "command": "rm -rf cmd/*/main cmd/*/*.exe pkg/*/*.a .cache/ bin/"
    },
    "init": {
      "command": "go mod tidy && mkdir -p bin .cache",
      "deps": ["clean"]
    },
    "detect-network": {
      "command": "chmod +x scripts/detect-region.sh && ./scripts/detect-region.sh",
      "deps": ["init"]
    },
    "fetch-cache-us-east": {
      "command": "chmod +x scripts/fetch-cache.sh && ./scripts/fetch-cache.sh us-east",
      "deps": ["detect-network"]
    },
    "fetch-cache-us-west": {
      "command": "chmod +x scripts/fetch-cache.sh && ./scripts/fetch-cache.sh us-west",
      "deps": ["detect-network"]
    },
    "fetch-cache-eu": {
      "command": "chmod +x scripts/fetch-cache.sh && ./scripts/fetch-cache.sh eu-central",
      "deps": ["detect-network"]
    },
    "build-api": {
      "command": "echo 'ðŸ”¨ Building API service...' && go build -o bin/api ./cmd/api",
      "deps": ["fetch-cache-us-east"]
    },
    "build-worker": {
      "command": "echo 'ðŸ”¨ Building worker service...' && go build -o bin/worker ./cmd/worker",
      "deps": ["fetch-cache-us-east"]
    },
    "build-frontend": {
      "command": "echo 'ðŸ”¨ Building frontend service...' && go build -o bin/frontend ./cmd/frontend",
      "deps": ["fetch-cache-us-east"]
    },
    "verify-builds": {
      "command": "chmod +x scripts/verify-builds.sh && ./scripts/verify-builds.sh",
      "deps": ["build-api", "build-worker", "build-frontend"]
    },
    "upload-cache": {
      "command": "chmod +x scripts/upload-cache.sh && ./scripts/upload-cache.sh",
      "deps": ["verify-builds"]
    },
    "sync-regions": {
      "command": "chmod +x scripts/sync-caches.sh && ./scripts/sync-caches.sh",
      "deps": ["upload-cache"]
    },
    "network-build": {
      "command": "echo 'âœ… Network-aware build complete!' && echo 'ðŸ“Š Build statistics:' && ./scripts/show-stats.sh",
      "deps": ["sync-regions"]
    },
    "benchmark": {
      "command": "chmod +x scripts/benchmark.sh && ./scripts/benchmark.sh"
    },
    "monitor": {
      "command": "chmod +x scripts/monitor-network.sh && ./scripts/monitor-network.sh"
    },
    "test-failure": {
      "command": "chmod +x scripts/test-failure.sh && ./scripts/test-failure.sh"
    }
  }
}

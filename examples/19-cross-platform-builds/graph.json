{
  "version": "1",
  "graphs": {
    "detect-platform": {
      "command": "bash scripts/detect-platform.sh"
    },

    "install-deps-linux": {
      "command": "if [ \"$(uname)\" = \"Linux\" ]; then bash scripts/install-deps.sh && echo '✓ Installed Linux dependencies'; else echo '⊘ Skipping install-deps-linux on '$(uname); fi"
    },

    "install-deps-macos": {
      "command": "if [ \"$(uname)\" = \"Darwin\" ]; then bash scripts/install-deps.sh && echo '✓ Installed macOS dependencies'; else echo '⊘ Skipping install-deps-macos on '$(uname); fi"
    },

    "install-deps-windows": {
      "command": "if [ \"$(uname -o 2>/dev/null || echo 'Unknown')\" = \"Msys\" ] || [ \"$(uname -o 2>/dev/null || echo 'Unknown')\" = \"Cygwin\" ]; then bash scripts/install-deps.sh && echo '✓ Installed Windows dependencies'; else echo '⊘ Skipping install-deps-windows on '$(uname); fi"
    },

    "install-deps": {
      "command": "echo '✓ Dependencies checked for all platforms'",
      "deps": ["install-deps-linux", "install-deps-macos", "install-deps-windows"]
    },

    "build-c-linux": {
      "command": "if [ \"$(uname)\" = \"Linux\" ]; then mkdir -p c-app/bin && gcc -o c-app/bin/app c-app/main.c -O2 && echo '✓ Built C app for Linux'; else echo '⊘ Skipping build-c-linux on '$(uname); fi",
      "deps": ["install-deps-linux"]
    },

    "build-c-macos": {
      "command": "if [ \"$(uname)\" = \"Darwin\" ]; then mkdir -p c-app/bin && clang -o c-app/bin/app c-app/main.c -O2 && echo '✓ Built C app for macOS'; else echo '⊘ Skipping build-c-macos on '$(uname); fi",
      "deps": ["install-deps-macos"]
    },

    "build-c-windows": {
      "command": "if [ \"$(uname -o 2>/dev/null || echo 'Unknown')\" = \"Msys\" ] || [ \"$(uname -o 2>/dev/null || echo 'Unknown')\" = \"Cygwin\" ]; then mkdir -p c-app/bin && gcc -o c-app/bin/app.exe c-app/main.c -O2 && echo '✓ Built C app for Windows'; else echo '⊘ Skipping build-c-windows on '$(uname); fi",
      "deps": ["install-deps-windows"]
    },

    "build-c": {
      "command": "echo '✓ C application build attempted for all platforms'",
      "deps": ["build-c-linux", "build-c-macos", "build-c-windows"]
    },

    "run-c-linux": {
      "command": "if [ \"$(uname)\" = \"Linux\" ]; then ./c-app/bin/app; else echo '⊘ Skipping run-c-linux on '$(uname); fi",
      "deps": ["build-c-linux"]
    },

    "run-c-macos": {
      "command": "if [ \"$(uname)\" = \"Darwin\" ]; then ./c-app/bin/app; else echo '⊘ Skipping run-c-macos on '$(uname); fi",
      "deps": ["build-c-macos"]
    },

    "run-c-windows": {
      "command": "if [ \"$(uname -o 2>/dev/null || echo 'Unknown')\" = \"Msys\" ] || [ \"$(uname -o 2>/dev/null || echo 'Unknown')\" = \"Cygwin\" ]; then ./c-app/bin/app.exe; else echo '⊘ Skipping run-c-windows on '$(uname); fi",
      "deps": ["build-c-windows"]
    },

    "run-c": {
      "command": "echo '✓ C application run attempted'",
      "deps": ["run-c-linux", "run-c-macos", "run-c-windows"]
    },

    "build-go": {
      "command": "go build -o bin/cross-platform-go-cli",
      "working_dir": "go-cli"
    },

    "build-go-linux-amd64": {
      "command": "mkdir -p bin && GOOS=linux GOARCH=amd64 go build -o bin/app-linux-amd64",
      "working_dir": "go-cli"
    },

    "build-go-linux-arm64": {
      "command": "mkdir -p bin && GOOS=linux GOARCH=arm64 go build -o bin/app-linux-arm64",
      "working_dir": "go-cli"
    },

    "build-go-darwin-amd64": {
      "command": "mkdir -p bin && GOOS=darwin GOARCH=amd64 go build -o bin/app-darwin-amd64",
      "working_dir": "go-cli"
    },

    "build-go-darwin-arm64": {
      "command": "mkdir -p bin && GOOS=darwin GOARCH=arm64 go build -o bin/app-darwin-arm64",
      "working_dir": "go-cli"
    },

    "build-go-windows-amd64": {
      "command": "mkdir -p bin && GOOS=windows GOARCH=amd64 go build -o bin/app-windows-amd64.exe",
      "working_dir": "go-cli"
    },

    "cross-compile-go": {
      "command": "echo '✓ Go application cross-compiled for all platforms'",
      "deps": [
        "build-go-linux-amd64",
        "build-go-linux-arm64",
        "build-go-darwin-amd64",
        "build-go-darwin-arm64",
        "build-go-windows-amd64"
      ]
    },

    "run-go": {
      "command": "./bin/cross-platform-go-cli 2>/dev/null || go run main.go",
      "working_dir": "go-cli",
      "deps": ["build-go"]
    },

    "build-rust": {
      "command": "cargo build --release",
      "working_dir": "rust-bin"
    },

    "build-rust-linux-x86_64": {
      "command": "if [ \"$(uname)\" = \"Linux\" ]; then cargo build --release --target x86_64-unknown-linux-gnu && echo '✓ Built Rust for Linux x86_64'; else echo '⊘ Skipping build-rust-linux-x86_64 on '$(uname); fi",
      "working_dir": "rust-bin"
    },

    "build-rust-macos-aarch64": {
      "command": "if [ \"$(uname)\" = \"Darwin\" ]; then cargo build --release --target aarch64-apple-darwin && echo '✓ Built Rust for macOS ARM64'; else echo '⊘ Skipping build-rust-macos-aarch64 on '$(uname); fi",
      "working_dir": "rust-bin"
    },

    "build-rust-macos-x86_64": {
      "command": "if [ \"$(uname)\" = \"Darwin\" ]; then cargo build --release --target x86_64-apple-darwin && echo '✓ Built Rust for macOS x86_64'; else echo '⊘ Skipping build-rust-macos-x86_64 on '$(uname); fi",
      "working_dir": "rust-bin"
    },

    "build-rust-windows": {
      "command": "if [ \"$(uname -o 2>/dev/null || echo 'Unknown')\" = \"Msys\" ] || [ \"$(uname -o 2>/dev/null || echo 'Unknown')\" = \"Cygwin\" ]; then cargo build --release --target x86_64-pc-windows-msvc && echo '✓ Built Rust for Windows'; else echo '⊘ Skipping build-rust-windows on '$(uname); fi",
      "working_dir": "rust-bin"
    },

    "run-rust": {
      "command": "cargo run --release",
      "working_dir": "rust-bin",
      "deps": ["build-rust"]
    },

    "install-node-deps": {
      "command": "npm install",
      "working_dir": "node-native"
    },

    "build-node": {
      "command": "npm run build",
      "working_dir": "node-native",
      "deps": ["install-node-deps"]
    },

    "run-node": {
      "command": "node index.js",
      "working_dir": "node-native"
    },

    "clean": {
      "command": "bash scripts/clean.sh"
    },

    "build-all": {
      "command": "echo '✓ All applications built successfully'",
      "deps": ["build-c", "build-go", "build-rust", "build-node"]
    },

    "cross-compile-all": {
      "command": "echo '✓ Cross-compilation complete for all targets'",
      "deps": ["cross-compile-go"]
    },

    "run-all": {
      "command": "echo '✓ All applications executed successfully'",
      "deps": ["run-c", "run-go", "run-rust", "run-node"]
    },

    "test": {
      "command": "bash test.sh"
    }
  }
}
